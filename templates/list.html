{% extends "layout.html" %}
{% block body %}
{% include "header.html" %}

<div id="content" class="list">

{% if entries %}

<div id="content_heading">
{% if tag %}#{{tag}} ({{entries|length()}}) 
<a href="/gallery/{{tag}}"><span class="octicon octicon-file-media"
 style="margin-left:16px;"></span></a>{% endif %}
{% if notag %}({{entries|length()}}) not tagged{% endif %}
{% if terms %}found ({{entries|length()}}) matching "{{terms}}"{% endif %}
{% if request.path=='/list' %}
  ({{entries|length()}}) entries by date <i>created</i>
{% endif %}
{% if request.path=='/updates' %}
  ({{entries|length()}}) entries by date <i>updated</i>
{% endif %}
</div>

<style type="text/css">
#content.list table {
  border-collapse:collapse;
  padding:1em;
}
#content.list table td {
  padding:0.2em;
  padding-right:2em;
}
#content.list table tr.heading:not(:first-child) td {
  padding-top:2em;
}
#content.list table tr.entry:hover {
  text-decoration:underline;
}
#content.list table td.date {
  white-space:nowrap;
  vertical-align:center;
  font-size:smaller;
  opacity:0.5;
}
#content.list table th {
  font-weight:normal;
  opacity:0.5;
  text-align:left;
}
#content.list div.listing {
  padding:2em;
  background:white;
  border:1px solid silver;
  border-radius:4px;
}
</style>

<div align=center class="listing">
<table>
{% if not sortby %}
<tr>
  <th>Title
  <th>Created
  <th>Updated
{% endif %}
{% for entry in entries %}
{% if sortby and not entry.month == last_month %}
<tr class=heading>
  {% if entry.month and entry.year %}
  <td><b>{{entry.month}} {{entry.year}}</b>
  {% else %}
  <td>
  {% endif %}
  <td>{% if not sortby or sortby=='created' %}<i>Created</i>
      {% else %}<a href="/list">Created</a>{% endif %}
  <td>{% if sortby=='updated' %}<i>Updated</i>
      {% else %}<a href="/updates">Updated</a>{% endif %}
{% endif %}
<tr class=entry>
  <td><a href="/entry/{{entry.id}}">{{entry.title}}</a>
  <td class=date>{{entry.date_str}}
  <td class=date>{{entry.updated}}
{% set last_month = entry.month %}
{% endfor %}
</table>
</div>

{% else %}
<div align=center>No entries yet!</div>
{% endif %}

</div>

{% endblock %}
